@Library('jenkins-pipelines-configuration') _

// ConfiguraciÃ³n del pipeline con control de ramas y webhooks mejorado
jenkinsPipelinesExample([
    // ConfiguraciÃ³n bÃ¡sica
    language: 'angular',
    serviceName: 'my-angular-app',
    dockerRegistry: 'docker.io/myregistry',
    
    // Control de triggers y validaciones
    enableWebhook: true,  // Habilitar webhook (true por defecto)
    skipInvalidBranches: true,  // Saltar ramas no vÃ¡lidas (true por defecto)
    
    // Ramas vÃ¡lidas para ejecuciÃ³n automÃ¡tica
    validBranches: ['main', 'master', 'dev', 'develop', 'qa'],
    
    // ConfiguraciÃ³n de notificaciones
    notifyOnFailure: true,
    
    // ConfiguraciÃ³n de aprobaciones (opcional, se configura por rama automÃ¡ticamente)
    approvers: 'admin,devops-team',
    
    // Repositorio de configuraciÃ³n externa (opcional)
    configRepoUrl: 'https://github.com/myorg/k8s-config.git',
    
    // Tipo de despliegue
    typeDeployd: 'k8s'
])

/*
CONFIGURACIÃ“N AUTOMÃTICA POR RAMA:

ğŸŒŸ MAIN/MASTER:
   - Environment: production
   - Docker Push: âœ… SI
   - Deploy K8s: âœ… SI  
   - Require Approval: âœ… SI
   
ğŸ§ª QA:
   - Environment: qa
   - Docker Push: âœ… SI
   - Deploy K8s: âœ… SI
   - Require Approval: âŒ NO
   
ğŸ”§ DEV/DEVELOP:
   - Environment: development
   - Docker Push: âŒ NO (solo local)
   - Deploy K8s: âœ… SI
   - Require Approval: âŒ NO
   
ğŸŒ¿ FEATURE-*:
   - Environment: feature
   - Docker Push: âŒ NO
   - Deploy K8s: âŒ NO (solo CI)
   - Require Approval: âŒ NO
   
ğŸ› BUGFIX-*:
   - Environment: bugfix
   - Docker Push: âŒ NO
   - Deploy K8s: âŒ NO (solo CI)
   - Require Approval: âŒ NO
   
ğŸ”¥ HOTFIX-*:
   - Environment: hotfix
   - Docker Push: âœ… SI
   - Deploy K8s: âœ… SI
   - Require Approval: âœ… SI
   
ğŸ”€ PR-*:
   - Environment: pr
   - Docker Push: âŒ NO
   - Deploy K8s: âŒ NO (solo CI)
   - Require Approval: âŒ NO

âŒ OTRAS RAMAS:
   - Se marcan como no vÃ¡lidas y el pipeline se cancela automÃ¡ticamente
*/